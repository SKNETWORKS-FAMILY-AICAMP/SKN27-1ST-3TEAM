import streamlit as st
from numpy.random import default_rng as rng
import pandas as pd
import plotly.graph_objects as go
import pandas as pd


container = st.container(border = True, height = 140)
container.header("ğŸ“Šì¸í”„ë¼ ê²©ì°¨ ë¶„ì„")
container.text("ì§€ì—­ë³„ ì¶©ì „ ì¸í”„ë¼ ë° ì¹œí™˜ê²½ì°¨ í˜„í™© ë¹„êµ")


col1, col2, col3, col4 = st.columns(4)
col1.metric("ì „ê¸°ì°¨ ë“±ë¡ ëŒ€ìˆ˜", "2,244ëŒ€", border =True, width = 250, height="content")
col2.metric("ìˆ˜ì†Œì°¨ ë“±ë¡ ëŒ€ìˆ˜", "126ëŒ€", border =True, width = 250, height="content")
col3.metric("ì´ ì¶©ì „ê¸° ìˆ˜", "215ê¸°", border =True, width = 250, height="content")
col4.metric("ì „ê¸°ì°¨ëŸ‰ ì¶©ì „ê¸°", "0.10 ê¸°/ëŒ€", border =True, width = 250, height="content")


df = pd.DataFrame({
    "ì§€ì—­": ["ê²½ê¸°", "ì„œìš¸", "ì¸ì²œ", "ë¶€ì‚°", "ìš¸ì‚°", "ëŒ€ì „"],
    "ì „ê¸°ì°¨ ìˆ˜": [200,300,100,80,70,60],   # ì°¨ëŸ‰ ìˆ˜
    "ì¶©ì „ê¸° ìˆ˜": [100,120,150,170,200,180], # ì¶©ì „ê¸° ìˆ˜
})

fig = go.Figure()

# 1ï¸âƒ£ ì „ê¸°ì°¨ (ë§‰ëŒ€, ì™¼ìª½)
fig.add_trace(go.Bar(
    x=df["ì§€ì—­"],
    y=df["ì „ê¸°ì°¨ ìˆ˜"],
    name="ì „ê¸°ì°¨",
    yaxis="y1",
    opacity=0.7
))

# 3ï¸âƒ£ ì¶©ì „ê¸° (ë§‰ëŒ€, ì˜¤ë¥¸ìª½)
fig.add_trace(go.Bar(
    x=df["ì§€ì—­"],
    y=df["ì¶©ì „ê¸° ìˆ˜"],
    name="ì¶©ì „ê¸°",
    yaxis="y2",
    opacity=0.7
))

fig.update_layout(
    title="ì „ê¸°ì°¨ì™€ ì¶©ì „ê¸° ìˆ˜ìš”ëŸ‰",
    xaxis=dict(title="ì§€ì—­"),

    yaxis=dict(
        title="ì „ê¸°ì°¨ ë“±ë¡ ëŒ€ìˆ˜",
        side="left"
    ),

    yaxis2=dict(
        title="ì¶©ì „ê¸° ìˆ˜",
        overlaying = "y",
        side="right"
    ),

    barmode="group"
)

st.plotly_chart(fig, use_container_width=True)

df = pd.DataFrame(
    [
        {"ì§€ì—­": df["ì§€ì—­"][0], "ì „ê¸°ì°¨": df["ì „ê¸°ì°¨ ìˆ˜"][0], "ì¶©ì „ê¸°": df["ì¶©ì „ê¸° ìˆ˜"][0],"ì „ê¸°ì°¨ë‹¹ ì¶©ì „ê¸°":df["ì¶©ì „ê¸° ìˆ˜"][0]/df["ì „ê¸°ì°¨ ìˆ˜"][0]},
        {"ì§€ì—­": df["ì§€ì—­"][1], "ì „ê¸°ì°¨": df["ì „ê¸°ì°¨ ìˆ˜"][1], "ì¶©ì „ê¸°": df["ì¶©ì „ê¸° ìˆ˜"][1],"ì „ê¸°ì°¨ë‹¹ ì¶©ì „ê¸°":df["ì¶©ì „ê¸° ìˆ˜"][1]/df["ì „ê¸°ì°¨ ìˆ˜"][1]},
        {"ì§€ì—­": df["ì§€ì—­"][2], "ì „ê¸°ì°¨": df["ì „ê¸°ì°¨ ìˆ˜"][2], "ì¶©ì „ê¸°": df["ì¶©ì „ê¸° ìˆ˜"][2],"ì „ê¸°ì°¨ë‹¹ ì¶©ì „ê¸°":df["ì¶©ì „ê¸° ìˆ˜"][2]/df["ì „ê¸°ì°¨ ìˆ˜"][2]},
        {"ì§€ì—­": df["ì§€ì—­"][3], "ì „ê¸°ì°¨": df["ì „ê¸°ì°¨ ìˆ˜"][3], "ì¶©ì „ê¸°": df["ì¶©ì „ê¸° ìˆ˜"][3],"ì „ê¸°ì°¨ë‹¹ ì¶©ì „ê¸°":df["ì¶©ì „ê¸° ìˆ˜"][3]/df["ì „ê¸°ì°¨ ìˆ˜"][3]},
        {"ì§€ì—­": df["ì§€ì—­"][4], "ì „ê¸°ì°¨": df["ì „ê¸°ì°¨ ìˆ˜"][4], "ì¶©ì „ê¸°": df["ì¶©ì „ê¸° ìˆ˜"][4],"ì „ê¸°ì°¨ë‹¹ ì¶©ì „ê¸°":df["ì¶©ì „ê¸° ìˆ˜"][4]/df["ì „ê¸°ì°¨ ìˆ˜"][4]},
        {"ì§€ì—­": df["ì§€ì—­"][5], "ì „ê¸°ì°¨": df["ì „ê¸°ì°¨ ìˆ˜"][5], "ì¶©ì „ê¸°": df["ì¶©ì „ê¸° ìˆ˜"][5],"ì „ê¸°ì°¨ë‹¹ ì¶©ì „ê¸°":df["ì¶©ì „ê¸° ìˆ˜"][5]/df["ì „ê¸°ì°¨ ìˆ˜"][5]},
    ]
)

st.dataframe(df, use_container_width=True)